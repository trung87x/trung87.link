# Task Checklist: Admin & Database Schema Expansion

- [x] Database Schema <!-- id: 55 -->
  - [x] Research current Supabase schema usage <!-- id: 56 -->
  - [x] Create `courses` table SQL <!-- id: 57 -->
  - [x] Create `users`/`profiles` table SQL (sync with NextAuth) <!-- id: 58 -->
  - [x] Update `enrollments` table to link to `courses` and `users` <!-- id: 59 -->
- [x] Logic Updates <!-- id: 60 -->
  - [x] Refactor `/api/payment/create` to use prices from the `courses` table <!-- id: 61 -->
- [x] Admin Feature <!-- id: 62 -->
  - [x] Create Admin layout `src/app/(admin)/layout.jsx` <!-- id: 63 -->
  - [x] Implement Dashboard (statistics) <!-- id: 64 -->
  - [x] Implement Course Management (List/CRUD) <!-- id: 65 -->
  - [x] Implement User Management (List/Details) <!-- id: 66 -->
  - [x] Implement Order/Invoice Management <!-- id: 67 -->
- [x] Verification <!-- id: 68 -->
  - [x] Verify dynamic pricing in checkout <!-- id: 69 -->
  - [x] Verify Admin pages access control <!-- id: 70 -->
  - [x] Create walkthrough artifact <!-- id: 71 -->
- [x] Course Creation Feature <!-- id: 72 -->
  - [x] Create `src/app/admin/courses/new/page.jsx` form <!-- id: 73 -->
  - [x] Implement `src/app/admin/courses/actions.js` server action <!-- id: 74 -->
  - [x] Update `Add Course` button link in list page <!-- id: 75 -->
- [x] Auth & Profile Automation <!-- id: 77 -->
  - [x] Update schema.sql to remove FK constraint <!-- id: 78 -->
  - [x] Implement auto-create profile logic in NextAuth <!-- id: 79 -->
  - [x] Auto-assign Admin role for specific email <!-- id: 80 -->
- [x] Security Enforcement <!-- id: 81 -->
  - [x] Update `src/utils/auth/index.js` for role check in middleware <!-- id: 82 -->
  - [x] Implement `auth()` role check in `src/app/admin/layout.jsx` <!-- id: 83 -->
  - [x] Verify non-admin users are blocked <!-- id: 84 -->
  - [x] Create E2E test for role-based access <!-- id: 85 -->
